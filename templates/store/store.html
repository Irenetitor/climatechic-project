{% extends "base/base.html" %}
{% load static %}
{% block content %}

    <section class="padding-y-sm" style="min-height:84vh">
        <div class="card mx-auto" style="max-width: 380px; margin-top: 20px;">
            <div class="card-body">
                <h4 class="card-title mb-4">Enter City</h4>
                <form id="cityForm" method="GET" action="{% url 'store-home' %}">
                    <div class="form-group">
                        <input type="text" id="city" name="city" class="form-control" placeholder="City" required>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary btn-block">Show Recommendation</button>
                        {% if error %}
                            <button type="button" id="resetButton" class="btn btn-secondary btn-block" data-url="{% url 'store-home' %}">Reset</button>
                        {% endif %}
                    </div>
                    {% if error %}
                        <div class="alert alert-danger text-center ">{{ error }}</div>
                    {% endif %}
                </form>
            </div>

        </div>



        {% if city %}
            <h2 class="text-center my-4 mt-9">Products suitable for {{ city }}</h2>
        {% endif %}

        <div class="container mt-4">
            <div class="row">
                {% for product in products %}
                    <div class="col-lg-4">
                        <img class="thumbnail" src="{{product.imageURL}}">
                        <div class="box-element product">
                            <h6><strong>{{product.name}}</strong></h6>
                            <hr>
                            <button data-product="{{product.id}}" data-action="add" class="btn btn-outline-secondary add-btn update-cart">Add to Cart</button>
                            <a class="btn btn-outline-success" href="#">View</a>
                            <h4 style="display: inline-block; float: right"><strong>${{product.price|floatformat:2}}</strong></h4>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

{% endblock content %}